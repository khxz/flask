<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webpage</title>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/main.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/tweet.css') }}">
    <link href='https://css.gg/twitter.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<style>
      #hider
    {
        position:absolute;
        top: 0%;
        left: 0%;
        width:1600px;
        height:2000px;
        margin-top: -800px; /*set to a negative number 1/2 of your height*/
        margin-left: -500px; /*set to a negative number 1/2 of your width*/
        /*
        z- index must be lower than pop up box
       */
        z-index: 99;
       background-color:Black;
       opacity:0.6;
    }

    #popup_box  
    {

    position:absolute;
        top: 50%;
        left: 50%;
        width:10em;
        height:10em;
        margin-top: -5em; /*set to a negative number 1/2 of your height*/
        margin-left: -5em; /*set to a negative number 1/2 of your width*/
        border: 1px solid #ccc;
        border:  2px solid black;
        z-index:100; 

    }
</style>
<body>

  <div class="header">
    <div class="logo">
      <a href="https://twitter.com/krxzzxxsm">
      cyberbot</a>
    </div>
    <div class="menu">
      <a href="#" class="link">
        <div class="title">profile</div>
        <div class="bar"></div>
      </a>
      <a href="#" class="link">
        <div class="title">logs</div>
        <div class="bar"></div>
      </a>
      <a href="#" class="link">
        <div class="title">request</div>
        <div class="bar"></div>
      </a>
    </div> 
  </div>

  <h2>TWEETS REPORT</h2>
  <script>
      function refresh() {
            window.location.assign(
                "/refresh");
        }

    </script>
  <div class="btnref">  
    <button name="refresh" class="btnref" style="background:white; cursor:pointer;" onclick="refresh()">refresh</button> 
  </div>
  <div class="row">
    <div class="table, columnmain, tablemain">
      <table class="fl-tablemain" id ="table1">
        <thead>
          <tr>
            <th class="col-1">TIME&DATE</th>
            <th class="col-2">USERNAME</th>
            <th class="col-3">TWEETS</th>
            <th class="col-4">VISIT</th>
            <th class="col-5">WARNING</th>
            <th class="col-5">REPORT</th>
          </tr>
        </thead>
        <tbody id="tweetStream">
                <tr>

                </tr>
        </tbody>
      </table>
    </div>
  
<br>
<br>

<form class="l-design-widht" method="POST" action="/tweet">
  <div class="cardd">  
    <div class="card">
      <h2><svg class="icon" aria-hidden="true">
        <use xlink:href="#icon-coffee" href="#icon-coffee" /></svg>Tweet</h2>
      <label class="input">
        <input type="text" class="input__field" style="color:white;" name="tweet">
        <span class="input__label">tweet something...</span>
      </label>
      <div class="button-group">
        <button type="submit">Send</button>
        <button type="reset">Reset</button>
      </div>
    </div>
  </div>
</form>

  <br><br>
  <article class="l-design-widht">
  <div class="cardd">
  <div class="card">
    <table class="fl-tablesub" id="table2">
      <thead>
 <th colspan="5" style="text-align:center">FOUL WORDS</th>
      </thead>
      <tbody>
      <script>
        const keywords = [];

        "{% for x in range(3) %}"
        keywords.push("{{ foulwords[x] }}")
        "{% endfor %}"

        for(var x = 0; x<3;x++){
        var foulwords = keywords[x];     
    
        var tr = document.createElement('tr');
    
        var td = document.createElement('td');
        td.innerHTML = foulwords.replace("[{' ","").replace("'}, {'-hahahaha, -haha, -emoji, -RT'}]","");
        
        tr.appendChild(td);
        document.getElementById("table2").appendChild(tr);
        }
      </script>
      </tbody>
    </table>
<br>
</div>
</div></div>
</article>


  
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="icon-coffee" viewBox="0 0 20 20">
    <title>icon-coffee</title>
    <path fill="currentColor" d="M15,17H14V9h3a3,3,0,0,1,3,3h0A5,5,0,0,1,15,17Zm1-6v3.83A3,3,0,0,0,18,12a1,1,0,0,0-1-1Z"/>
    <rect fill="currentColor" x="1" y="7" width="15" height="12" rx="3" ry="3"/>
    <path fill="var(--color-accent)" d="M7.07,5.42a5.45,5.45,0,0,1,0-4.85,1,1,0,0,1,1.79.89,3.44,3.44,0,0,0,0,3.06,1,1,0,0,1-1.79.89Z"/>
    <path fill="var(--color-accent)" d="M3.07,5.42a5.45,5.45,0,0,1,0-4.85,1,1,0,0,1,1.79.89,3.44,3.44,0,0,0,0,3.06,1,1,0,1,1-1.79.89Z"/>
    <path fill="var(--color-accent)" d="M11.07,5.42a5.45,5.45,0,0,1,0-4.85,1,1,0,0,1,1.79.89,3.44,3.44,0,0,0,0,3.06,1,1,0,1,1-1.79.89Z"/>
  </symbol>
</svg>


  <script>
    const tweets = [];
    const dates = [];
    const users = [];
    const link = [];
    "{% for x in range(10) %}"
        tweets.push("{{ tweet[x] }}")
        dates.push("{{ date[x] }}")
        users.push("{{ users[x] }}")
        link.push("{{ link[x] }}")
    "{% endfor %}"

    for(var x = 0; x<10;x++){
    var tweet1 = tweets[x]; 
    var user = users[x];
    var date = dates[x];
    var links = link[x];
    
    var tr = document.createElement('tr');
    
    var td1 = document.createElement('td');
    td1.innerHTML = date.replace("[datetime.datetime(","").replace(", ","-").replace(", ","-").replace(","," ").replace(", ",":").replace(", ",":").replace(", tzinfo=datetime.timezone.utc)]","");

    var td2 = document.createElement('td');
    td2.innerHTML = "@"+user.substring(6, user.length-6);

    var td3 = document.createElement('td');
    td3.innerHTML = tweet1.substring(1, tweet1.length-2).replace("&#39","").replace("&#34","").replace(";","").replace("&#39","").replace("&#34","");

    var td4 = document.createElement('td');

    var button1 = document.createElement('button');
    var str = "https://twitter.com/" + user.substring(6, user.length-6) +"/status/" + links.substring(1, links.length-1);
    button1.innerHTML = '<i class="fa fa-twitter-square" aria-hidden="true" style="font-size:22px;"></i>'
    button1.setAttribute("onClick","window.open('"+ str +"')");
    var td4 = document.createElement('td');

    var button2 = document.createElement('button');
    var str = "https://twitter.com/" + user.substring(6, user.length-6) +"/status/" + links.substring(1, links.length-1);
    button2.innerHTML = '<i class="fa fa-inbox" aria-hidden="true" style="font-size:22px;"></i>'
    button2.setAttribute("onClick","window.open('product/"+ user.substring(6, user.length-6) +"/"+  links.substring(1, links.length-1) +"')");
    var td5 = document.createElement('td');

    var button3 = document.createElement('button');
    var str = "https://twitter.com/" + user.substring(6, user.length-6) +"/status/" + links.substring(1, links.length-1);
    button3.innerHTML = '<i class="fa fa-warning" aria-hidden="true" style="font-size:22px;"></i>'
    button3.setAttribute("onClick","window.open('report/"+ user.substring(6, user.length-6) +"/"+  links.substring(1, links.length-1) +"')");
    var td6 = document.createElement('td');

    td6.append(button3);
    td5.append(button2);
    td4.append(button1);
    tr.appendChild(td1);
    tr.appendChild(td2);
    tr.appendChild(td3);
    tr.appendChild(td4);
    tr.appendChild(td5);
    tr.appendChild(td6);
    document.getElementById("table1").appendChild(tr);
    
    }

</script>
<script>
     $(document).ready(function () {
        //hide hider and popup_box
        $("#hider").hide();
        $("#popup_box").hide();

        //on click show the hider div and the message
        $("#showpopup").click(function () {
            $("#hider").fadeIn("slow");
            $('#popup_box').fadeIn("slow");
        });
        //on click hide the message and the
        $("#buttonClose").click(function () {

            $("#hider").fadeOut("slow");
            $('#popup_box').fadeOut("slow");
        });

        });
</script>
    {

</body>
</html>